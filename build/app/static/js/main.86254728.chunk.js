(this["webpackJsonpmembership-system-demo-webapp"]=this["webpackJsonpmembership-system-demo-webapp"]||[]).push([[0],{502:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(65),s=r.n(c),u=r(9),i=r(354),o=r.n(i),p=(r(292),r(293),r(294),r(295),r(296),r(24)),l=r.n(p),b=r(35),d=r(58),f=r(170),j=r(356),h="/auth/signin",m="/api/auth/signin",v="/api/user/profile",x="/api/team-members",O="/api/workspaces";function k(e){return w.apply(this,arguments)}function w(){return(w=Object(b.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post(m,{json:t,throwHttpErrors:!1});case 3:return r=e.sent,e.next=6,r.json();case 6:if(n=e.sent,!r.ok){e.next=9;break}return e.abrupt("return",n);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),f.b.error("\u767b\u9646\u5931\u8d25\uff1a"+(null===e.t0||void 0===e.t0?void 0:e.t0.message),5e3);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function g(){return y.apply(this,arguments)}function y(){return(y=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)(x);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return S.apply(this,arguments)}function S(){return(S=Object(b.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post(x,{json:{email:t}});case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),f.b.error("\u6dfb\u52a0\u5931\u8d25"+(null===e.t0||void 0===e.t0?void 0:e.t0.message),5e3);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function C(e){return F.apply(this,arguments)}function F(){return(F=Object(b.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.delete(x,{json:{id:t}});case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),f.b.error("\u5220\u9664\u5931\u8d25"+(null===e.t0||void 0===e.t0?void 0:e.t0.message),5e3);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function I(){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)(O);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return W.apply(this,arguments)}function W(){return(W=Object(b.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post(O,{json:{name:t}});case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),f.b.error("\u6dfb\u52a0\u5931\u8d25"+(null===e.t0||void 0===e.t0?void 0:e.t0.message),5e3);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function z(e){return B.apply(this,arguments)}function B(){return(B=Object(b.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.delete(O,{json:{id:t}});case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),f.b.error("\u5220\u9664\u5931\u8d25"+(null===e.t0||void 0===e.t0?void 0:e.t0.message),5e3);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}r(114);var M=j.a.create({credentials:"include",throwHttpErrors:!1,hooks:{beforeError:[function(e){return 401!==e.response.status&&403!==e.response.status||document.location.replace(h),console.error("ky hooks beforeError",e),e}]}}),A=r(23),J=function(e){var t=e.children;return Object(A.jsx)(d.a,{value:{fetcher:function(){var e=Object(b.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get(t);case 3:if((r=e.sent).ok){e.next=9;break}return e.next=7,r.json();case 7:throw e.sent;case 9:return e.abrupt("return",r.json());case 12:throw e.prev=12,e.t0=e.catch(0),f.b.error("\u83b7\u53d6\u6570\u636e\u5931\u8d25 "+(null===e.t0||void 0===e.t0?void 0:e.t0.message)),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),revalidateOnFocus:!1},children:t})},P=r(149),V=r(57),q=r(96),H=r(517),K=r(518),N=r(519),Q=r(520),U=r(355),D=r(339),G=r.n(D)()((function(e,t){return{user:null,init:function(){var r=Object(b.a)(l.a.mark((function r(){var n;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t().user){r.next=6;break}return r.next=4,L();case 4:(n=r.sent)&&e({user:n});case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),clear:function(){return e({user:null}),!0}}}));function L(){return X.apply(this,arguments)}function X(){return(X=Object(b.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get(v);case 3:return t=e.sent,e.next=6,t.json();case 6:if(r=e.sent,!t.ok){e.next=9;break}return e.abrupt("return",r);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),f.b.error("\u83b7\u53d6\u6570\u636e\u5931\u8d25 "+(null===e.t0||void 0===e.t0?void 0:e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var Y=r(46),Z=r(516);function $(){var e=Object(V.g)(),t=G((function(e){return e.clear})),r=function(){var r=Object(b.a)(l.a.mark((function r(){return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t(),e.replace("/");case 2:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return Object(A.jsx)("div",{style:{height:"100%",padding:4},children:Object(A.jsx)(Y.a,{danger:!0,type:"primary",onClick:r,icon:Object(A.jsx)(Z.a,{}),children:"\u5207\u6362\u7528\u6237"})})}function _(e){var t=e.children,r=Object(V.h)(),a=Object(n.useState)(!0),c=Object(q.a)(a,2),s=c[0],u=c[1],i=G((function(e){return e.user})),o=G((function(e){return e.init}));if(Object(n.useEffect)((function(){Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:u(!1);case 3:case"end":return e.stop()}}),e)})))()}),[o]),s)return null;if(!i)return Object(A.jsx)(V.a,{to:{pathname:h,state:{from:r.pathname}}});var p={path:"/",routes:[{name:"User Profile",icon:Object(A.jsx)(H.a,{}),path:"/user/profile"},{name:"Team Members",icon:Object(A.jsx)(K.a,{}),path:"/team-members",hideInMenu:!Object.hasOwn(i.accessTags,"access-team-member")},{name:"Workspace",icon:Object(A.jsx)(N.a,{}),path:"/workspaces",hideInMenu:!Object.hasOwn(i.accessTags,"access-workspace")},{name:"Another Service",icon:Object(A.jsx)(Q.a,{}),path:"/public-service"}]};return Object(A.jsx)("div",{id:"test-pro-layout",style:{height:"100vh"},children:Object(A.jsx)(U.a,{logo:null,title:"App name",route:p,menu:{defaultOpenAll:!0},location:{pathname:r.pathname},menuItemRender:function(e,t){return Object(A.jsx)(P.b,{to:e.path,children:t})},rightContentRender:$,children:t})})}var ee=r(332);function te(){var e=Object(V.g)(),t=function(){var t=Object(b.a)(l.a.mark((function t(r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k({username:r,password:r});case 2:t.sent&&e.replace("/user/profile");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(A.jsx)("div",{style:{paddingTop:100,backgroundImage:"url(/bg.svg)",backgroundRepeat:"no-repeat",backgroundPosition:" center 110px",backgroundSize:"100%",backgroundColor:"#f0f2f5",height:"100vh"},children:Object(A.jsx)(ee.a,{title:"Membership System Demo",subTitle:"\u8bf7\u767b\u5f55\u540e\u8bbf\u95ee",submitter:!1,children:["free","basic","pro"].map((function(e){return Object(A.jsxs)(Y.a,{type:"primary",block:!0,size:"large",style:{marginBottom:20},onClick:function(){return t(e)},children:["\u767b\u5f55\u4e3a ",e.toUpperCase()," \u7528\u6237"]},e)}))})})}function re(){var e=G((function(e){return e.user}));return Object(A.jsxs)("div",{children:["\u5f53\u524d\u7528\u6237\u89d2\u8272\uff1a ",null===e||void 0===e?void 0:e.role,Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),"\u6743\u9650\u5217\u8868\uff1a",Object.keys((null===e||void 0===e?void 0:e.accessTags)||{}).map((function(t){return Object(A.jsxs)("div",{children:[t," = ",null===e||void 0===e?void 0:e.accessTags[t]]},t)}))]})}var ne=r(346),ae=r(358),ce=r(242),se=r(220),ue=r(513);function ie(){var e=Object(d.b)(x),t=e.data,r=e.isValidating,a=e.mutate,c=function(){var e=Object(b.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,C(t.id);case 3:return o(!1),e.next=6,a();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=Object(n.useState)(!1),u=Object(q.a)(s,2),i=u[0],o=u[1],p=[{title:"Email",dataIndex:"email"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt",valueType:"date"},{title:"\u64cd\u4f5c",width:180,key:"option",valueType:"option",render:function(e,t){return[Object(A.jsx)(ne.a,{title:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",onConfirm:function(){return c(t)},okButtonProps:{loading:i},children:Object(A.jsx)(Y.a,{type:"link",children:"\u5220\u9664"})},"delete")]}}];return Object(A.jsx)(ce.a,{search:!1,columns:p,dataSource:t,loading:r,rowKey:"id",pagination:{pageSize:20,showQuickJumper:!1,showSizeChanger:!1},request:function(){return a()},dateFormatter:"string",toolbar:{title:"Team Members"},toolBarRender:function(){return[Object(A.jsx)(oe,{})]}})}function oe(){var e=Object(n.useRef)();return Object(A.jsx)(se.a,{formRef:e,title:"\u6dfb\u52a0\u56e2\u961f\u6210\u5458",trigger:Object(A.jsxs)(Y.a,{type:"primary",children:[Object(A.jsx)(ae.a,{})," \u6dfb\u52a0\u56e2\u961f\u6210\u5458"]}),width:500,autoFocusFirstInput:!0,submitTimeout:2e3,onVisibleChange:function(t){var r;t||(null===(r=e.current)||void 0===r||r.resetFields())},onFinish:function(){var e=Object(b.a)(l.a.mark((function e(t){var r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t.email);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!n.ok){e.next=9;break}return f.b.success("\u6dfb\u52a0\u6210\u5458\u6210\u529f"),g(),e.abrupt("return",!0);case 9:return e.next=11,n.json();case 11:if(!(null===(a=e.sent)||void 0===a||null===(r=a.validationErrors)||void 0===r?void 0:r.find((function(e){return"email"===e.name})))){e.next=15;break}return f.b.error("\u6210\u5458\u5df2\u5b58\u5728"),e.abrupt("return",!0);case 15:f.b.error("\u6dfb\u52a0\u6210\u5458\u5931\u8d25 "+a.message);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(A.jsx)(ue.a,{name:"email",label:"Email",placeholder:"\u8bf7\u8f93\u5165 Email"})})}function pe(){var e=Object(d.b)(O),t=e.data,r=e.isValidating,a=e.mutate,c=function(){var e=Object(b.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,z(t.id);case 3:return o(!1),e.next=6,a();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=Object(n.useState)(!1),u=Object(q.a)(s,2),i=u[0],o=u[1],p=[{title:"Name",dataIndex:"name"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt",valueType:"date"},{title:"\u64cd\u4f5c",width:180,key:"option",valueType:"option",render:function(e,t){return[Object(A.jsx)(ne.a,{title:"\u786e\u5b9a\u5220\u9664\u5417\uff1f",onConfirm:function(){return c(t)},okButtonProps:{loading:i},children:Object(A.jsx)(Y.a,{type:"link",children:"\u5220\u9664"})},"delete")]}}];return Object(A.jsx)(ce.a,{search:!1,columns:p,dataSource:t,loading:r,rowKey:"id",pagination:{pageSize:20,showQuickJumper:!1,showSizeChanger:!1},request:function(){return a()},dateFormatter:"string",toolbar:{title:"Workspaces"},toolBarRender:function(){return[Object(A.jsx)(le,{})]}})}function le(){var e=Object(n.useRef)();return Object(A.jsx)(se.a,{formRef:e,title:"\u6dfb\u52a0 Workspace",trigger:Object(A.jsxs)(Y.a,{type:"primary",children:[Object(A.jsx)(ae.a,{})," \u6dfb\u52a0 Workspace"]}),width:500,autoFocusFirstInput:!0,submitTimeout:2e3,onVisibleChange:function(t){var r;t||(null===(r=e.current)||void 0===r||r.resetFields())},onFinish:function(){var e=Object(b.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t.name);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(!r.ok){e.next=9;break}return f.b.success("\u6dfb\u52a0 Workspace \u6210\u529f"),I(),e.abrupt("return",!0);case 9:return e.next=11,r.json();case 11:n=e.sent,f.b.error("\u6dfb\u52a0 Workspace \u5931\u8d25 "+n.message);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:Object(A.jsx)(ue.a,{name:"name",label:"Name",placeholder:"\u8bf7\u8f93\u5165 Workspace \u540d\u79f0"})})}function be(){return Object(A.jsx)(P.a,{children:Object(A.jsxs)(V.d,{children:[Object(A.jsx)(V.b,{path:h,children:Object(A.jsx)(te,{})}),Object(A.jsxs)(_,{children:[Object(A.jsx)(V.b,{path:"/user/profile",children:Object(A.jsx)(re,{})}),Object(A.jsx)(V.b,{path:"/team-members",children:Object(A.jsx)(ie,{})}),Object(A.jsx)(V.b,{path:"/workspaces",children:Object(A.jsx)(pe,{})})]})]})})}var de=function(){return Object(A.jsx)(J,{children:Object(A.jsx)(u.a,{locale:o.a,children:Object(A.jsx)(be,{})})})};s.a.render(Object(A.jsx)(a.a.StrictMode,{children:Object(A.jsx)(de,{})}),document.getElementById("root"))}},[[502,1,2]]]);
//# sourceMappingURL=main.86254728.chunk.js.map